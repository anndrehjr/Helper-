<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nome da Loja</title>
    
    <!-- CSS Links -->
    <link rel="stylesheet" href="pagina-dois.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    
    <!-- JS Links -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .quadros-container {
            margin-top: 20px;
        }

        .quadro {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            margin: 5px 0;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .quadro.selected {
            background-color: #007bff;
            color: white;
        }

        .quadro.predefinida {
            background-color: #e9ecef;
            cursor: default;
        }

        .btn-editar, .btn-excluir {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="barra_de_menu">
        <!-- Botão para voltar -->
        <button id="voltar-btn" onclick="window.location.href = '../PG-01/index.html';">
            <i class="fas fa-arrow-left"></i> <!-- Ícone de seta para voltar -->
        </button>
        <!-- Botão para adicionar quadro -->
        <button id="adicionarQuadroBtn" class="btn" onclick="mostrarFormulario()">
            <i class="fas fa-plus"></i> Adicionar Quadro
        </button>
    </div>

    <div class="Menu-Mensagens" id="menuMensagens">
        <!-- Mensagens com ícones -->
        <div><button class="btn" onclick="copiarMensagem('manha')"><i class="fas fa-sun"></i> Bom Dia!</button></div>
        <div><button class="btn" onclick="copiarMensagem('tarde')"><i class="fas fa-cloud-sun"></i> Boa Tarde!</button></div>
        <div><button class="btn" onclick="copiarMensagem('noite')"><i class="fas fa-moon"></i> Boa Noite!</button></div>
        <div><button class="btn" onclick="copiarMensagem('duvida')"><i class="fas fa-question"></i> Pergunta Dúvida</button></div>
        <div><button class="btn" onclick="copiarMensagem('explica')"><i class="fas fa-info-circle"></i> Explica Melhor</button></div>
        <div><button class="btn" onclick="copiarMensagem('encerrar')"><i class="fas fa-times-circle"></i> Encerrar</button></div>
    </div>

    <div id="novoQuadroForm" style="display: none;">
        <input id="titulo" placeholder="Digite o título aqui..." maxlength="30"><br>
        <textarea id="mensagem" rows="4" cols="30" placeholder="Digite sua mensagem aqui (máximo 200 caracteres)..." maxlength="200"></textarea><br>
        <button id="botaoSalvarMensagem" onclick="salvarMensagem()">
            <i class="fas fa-save"></i> Salvar Mensagem
        </button>
        <p id="mensagemSalva"></p>
    </div>

    <div id="quadrosContainer" class="quadros-container"></div>

    <div id="btn-container" class="btn-container">
        <button class="btn btn-warning btn-editar" id="btn-editar" disabled>Editar</button>
        <button class="btn btn-danger btn-excluir" id="btn-excluir" disabled>Excluir</button>
    </div>

    <!-- Modal -->
    <div id="modalEditar" class="modal">
        <div class="modal-content">
            <span class="close" id="fecharModal">&times;</span>
            <h2>Editar Mensagem</h2>
            <label for="novoTitulo">Título:</label>
            <input type="text" id="novoTitulo" maxlength="30" placeholder="Digite o novo título">
            <label for="novaMensagem">Mensagem:</label>
            <textarea id="novaMensagem" maxlength="200" placeholder="Digite a nova mensagem"></textarea>
            <button id="salvarEdicao">Salvar</button>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="toast1" class="toast align-items-center text-bg-success" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">Mensagem copiada para a área de transferência!</div>
                <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
    </div>

    <footer>
        © Andre Junior ~ Dev
    </footer>

    <script>
        let selectedMessage = null;

        function mostrarFormulario() {
            document.getElementById('novoQuadroForm').style.display = 'block';
        }

        function salvarMensagem() {
            const titulo = document.getElementById('titulo').value;
            const mensagem = document.getElementById('mensagem').value;

            if (titulo && mensagem) {
                const quadro = document.createElement('div');
                quadro.className = 'quadro';
                quadro.innerHTML = `<strong>${titulo}</strong><br>${mensagem}`;
                quadro.onclick = () => selectMessage(quadro);

                document.getElementById('quadrosContainer').appendChild(quadro);
                document.getElementById('mensagemSalva').innerText = 'Mensagem salva!';
                document.getElementById('titulo').value = '';
                document.getElementById('mensagem').value = '';
            }
        }

        function selectMessage(element) {
            // Remove a seleção da mensagem anterior, se houver
            if (selectedMessage) {
                selectedMessage.classList.remove('selected');
            }

            // Define a nova mensagem selecionada
            selectedMessage = element;
            selectedMessage.classList.add('selected');

            // Habilita os botões de editar e excluir
            document.getElementById('btn-editar').disabled = false;
            document.getElementById('btn-excluir').disabled = false;
        }

        document.getElementById('btn-editar').addEventListener('click', () => {
            if (selectedMessage) {
                const titulo = selectedMessage.querySelector('strong').innerText;
                const mensagem = selectedMessage.innerText.replace(titulo, '').trim();

                document.getElementById('novoTitulo').value = titulo;
                document.getElementById('novaMensagem').value = mensagem;

                document.getElementById('modalEditar').style.display = 'block';
            }
        });

        document.getElementById('salvarEdicao').addEventListener('click', () => {
            if (selectedMessage) {
                const novoTitulo = document.getElementById('novoTitulo').value;
                const novaMensagem = document.getElementById('novaMensagem').value;

                selectedMessage.innerHTML = `<strong>${novoTitulo}</strong><br>${novaMensagem}`;
                document.getElementById('modalEditar').style.display = 'none';
                selectedMessage.classList.remove('selected');
            }
        });

        document.getElementById('btn-excluir').addEventListener('click', () => {
            if (selectedMessage) {
                selectedMessage.remove(); // Remove a mensagem da lista
                selectedMessage = null; // Limpa a seleção
                document.getElementById('btn-editar').disabled = true; // Desabilita os botões
                document.getElementById('btn-excluir').disabled = true;
            }
        });

        // Fecha o modal ao clicar na 'x'
        document.getElementById('fecharModal').addEventListener('click', () => {
            document.getElementById('modalEditar').style.display = 'none';
        });
    </script>
</body>
</html>
